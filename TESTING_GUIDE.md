# Web 访问功能测试指南

本文档提供了详细的测试步骤，用于验证新增的 Web 访问功能。

## 前置准备

1. **安装依赖**（如果尚未安装）：
```bash
cd electron-quiz-app
npm install
```

2. **确保题库已导入**：
   - 启动应用后，在主页或设置页面导入题库 Excel 文件
   - 确认题库数据已成功加载

## 测试步骤

### 1. 启动 Electron 应用

```bash
npm run dev
```

### 2. 启用 Web 服务器

在应用中：
1. 导航到 "设置" 页面
2. 找到 "Web 访问" 部分
3. 点击 "启动 Web 服务器" 按钮
4. 记录显示的访问地址（例如：`http://localhost:3000`）

预期结果：
- 按钮文本变为 "停止 Web 服务器"
- 显示服务器状态为 "运行中"
- 显示正确的端口号和访问地址

### 3. 在桌面浏览器中测试

打开浏览器，访问显示的地址（例如：`http://localhost:3000`）

**测试内容：**

#### 3.1 主页
- ✅ 页面正常加载
- ✅ 导航菜单正常显示
- ✅ 可以看到题库统计信息

#### 3.2 练习模式
1. 点击 "开始练习" 或导航到练习页面
2. 验证题目正常显示
3. 选择答案并提交
4. 查看答案解析

预期结果：
- ✅ 题目内容完整显示
- ✅ 选项可以正常选择
- ✅ 提交后显示正确/错误反馈
- ✅ 解析内容正确显示

#### 3.3 模拟考试
1. 导航到模拟考试页面
2. 设置题目数量
3. 开始考试
4. 完成所有题目并提交
5. 查看成绩报告

预期结果：
- ✅ 考试界面正常
- ✅ 计时器正常工作
- ✅ 可以跳转到不同题目
- ✅ 成绩报告正确显示

#### 3.4 搜索功能
1. 导航到搜索页面
2. 输入搜索关键词
3. 查看搜索结果

预期结果：
- ✅ 搜索结果正确
- ✅ 可以点击查看题目详情

### 4. 在移动设备上测试

**方法 1：使用手机浏览器**

1. 确保手机和电脑在同一个 WiFi 网络
2. 找到电脑的局域网 IP 地址：
   - macOS: `ifconfig | grep "inet " | grep -v 127.0.0.1`
   - Windows: `ipconfig` (找到 IPv4 地址)
   - Linux: `ip addr show`
3. 在手机浏览器中访问：`http://[电脑IP]:3000`
   例如：`http://192.168.1.100:3000`

**方法 2：使用浏览器开发者工具**

在桌面浏览器中：
1. 打开开发者工具（F12）
2. 点击 "切换设备工具栏" 图标（或按 Ctrl+Shift+M / Cmd+Shift+M）
3. 选择移动设备型号（如 iPhone 12, Samsung Galaxy S20）
4. 测试不同屏幕尺寸

**移动端测试内容：**

#### 4.1 响应式布局
- ✅ 页面适配小屏幕
- ✅ 字体大小合适
- ✅ 按钮足够大，易于点击
- ✅ 导航菜单适配移动端

#### 4.2 触摸交互
- ✅ 可以滑动页面
- ✅ 点击按钮响应迅速
- ✅ 表单输入正常

#### 4.3 功能完整性
- ✅ 所有功能在移动端都可用
- ✅ 练习模式正常
- ✅ 模拟考试正常
- ✅ 搜索功能正常

### 5. API 端点测试（可选）

使用 curl 或 Postman 测试 API：

```bash
# 获取所有题目
curl http://localhost:3000/api/questions

# 搜索题目
curl "http://localhost:3000/api/questions/search?q=关键词"

# 获取随机题目
curl http://localhost:3000/api/questions/random/10

# 获取设置
curl http://localhost:3000/api/settings

# 获取统计信息
curl http://localhost:3000/api/statistics
```

预期结果：
- ✅ 每个端点返回正确的 JSON 数据
- ✅ HTTP 状态码正确（200 表示成功）

### 6. 停止 Web 服务器

在应用设置页面：
1. 点击 "停止 Web 服务器" 按钮
2. 确认服务器状态变为 "未运行"
3. 尝试访问 `http://localhost:3000`

预期结果：
- ✅ 按钮文本变为 "启动 Web 服务器"
- ✅ 浏览器无法访问（连接被拒绝）

### 7. 端口冲突测试

1. 手动占用 3000 端口（例如运行其他服务）
2. 在应用中启动 Web 服务器
3. 检查是否自动使用其他端口（3001, 3002 等）

预期结果：
- ✅ 服务器成功启动在其他可用端口
- ✅ 显示实际使用的端口号

## 已知问题和限制

1. **考试结果保存**：目前保存考试结果的功能尚未完全实现
2. **多用户访问**：当前版本不支持多用户同时使用不同的进度
3. **安全性**：Web 服务器没有身份验证，仅适合本地网络使用

## 性能测试（可选）

### 并发测试
使用 Apache Bench 测试并发性能：

```bash
# 安装 Apache Bench (macOS 通常已预装)
# 测试 100 个请求，10 个并发
ab -n 100 -c 10 http://localhost:3000/api/questions
```

### 大数据量测试
1. 导入大量题目（1000+ 道）
2. 测试搜索性能
3. 测试随机题目生成性能

## 故障排查

### 问题：Web 服务器无法启动
- 检查端口是否被占用
- 查看控制台错误日志
- 确认依赖包已正确安装

### 问题：移动端无法访问
- 确认手机和电脑在同一网络
- 检查防火墙设置
- 验证 IP 地址是否正确

### 问题：页面显示异常
- 清除浏览器缓存
- 检查浏览器控制台错误
- 验证静态文件路径是否正确

## 生产环境部署建议

如果要在生产环境使用：

1. **添加身份验证**：实现用户登录系统
2. **使用 HTTPS**：配置 SSL 证书
3. **反向代理**：使用 Nginx 或 Apache
4. **性能优化**：启用 gzip 压缩、缓存等
5. **监控和日志**：添加访问日志和错误监控

## 反馈

测试过程中发现的任何问题，请记录：
- 问题描述
- 重现步骤
- 预期行为 vs 实际行为
- 浏览器/设备信息
- 截图（如适用）
